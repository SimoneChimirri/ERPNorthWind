<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="SimoneChimirri">
    <meta name="descripton" content="Pagina di gestione prodotti e categorie">
    <title>ERP NorthWind - Prodotti e Categorie</title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script type="text/javascript" src="js/auth.js"></script>
    <script>
        function toggleMenubar() {
            var menulist = document.getElementById("menulist");
            if(menulist.classList.contains("collapsed")){
                menulist.classList.remove("collapsed");
                return;
            } else{
                menulist.classList.add("collapsed");
            }
        }
    </script>
</head>
<body onload="requireAuth(); caricaProdotti(); caricaCategorie()">
    <div class="wrapper container">
        <div id="top">
            <img id="logo" src="resources/images/NorthWind logo.png">
            <h1>NorthWind</h1>
            <p>ERP</p>
        </div>
        <div class="wrapper">
            <div id="menubar">
                <button id="toggleMenuButton" onclick="toggleMenubar()"><i class="fa fa-bars"></i></button>
                <ul id="menulist">
                    <li class="menuitem"><a href="index.html"><i class="fa fa-house"></i>Riepilogo</a></li>
                    <li class="menuitem"><a href="ordini.html"><i class="fa fa-list"></i>Ordini</a></li>
                    <li class="menuitem selected"><a href="prodotti_categorie.html"><i class="fa fa-box"></i>Prodotti e categorie</a></li>
                    <li class="menuitem"><a href="clienti.html"><i class="fa fa-person"></i>Clienti</a></li>
                    <li class="menuitem"><a href="spedizionieri_fornitori.html"><i class="fa fa-truck"></i>Spedizionieri e fornitori</a></li>
                    <li class="menuitem"><a href="dipendenti.html"><i class="fa fa-user"></i>Dipendenti</a></li>
                    <li class="menuitem"><a href="#" onclick="logout()"><i class="fa fa-sign-out-alt"></i>Logout</a></li>
                </ul>
            </div>
            <div id="main">
                <div id="mainHeader">
                    <h1>Gestione prodotti e categorie</h1>
                    <div id="toolbar">
                        <div>
                            <input type="text" id="searchFieldProdotti">
                            <input type="button" value="Cerca prodotto" class="btn" onclick="ricercaProdotti()">
                        </div>
                        <div>
                            <input type="text" id="updateFieldProdotti">
                            <input type="button" value="Aggiorna prodotto" class="btn" onclick="selezionaProdotto()">
                        </div>
                        <div>
                            <input type="button" value="Crea prodotto" class="btn" onclick="document.getElementById('sidebar').classList.remove('collapsed');">
                        </div>
                        <div>
                            <input type="text" id="deleteFieldProdotti">
                            <input type="button" value="Elimina prodotto" class="btn" onclick="eliminaProdotto()">
                        </div>
                        <div>
                            <input type="button" value="Esporta prodotti in formato Excel" class="btn" onclick="esportaProdottiExcel()">
                        </div>
                    </div>
                    <div id="toolbar">
                        <div>
                            <input type="text" id="searchFieldCategorie">
                            <input type="button" value="Cerca categoria" class="btn" onclick="ricercaCategorie()">
                        </div>
                        <div>
                            <input type="text" id="updateFieldCategorie">
                            <input type="button" value="Aggiorna categoria" class="btn" onclick="selezionaCategoria()">
                        </div>
                        <div>
                            <input type="button" value="Crea categoria" class="btn" onclick="document.getElementById('sidebar').classList.remove('collapsed');">
                        </div>
                        <div>
                            <input type="text" id="deleteFieldCategorie">
                            <input type="button" value="Elimina categoria" class="btn" onclick="eliminaCategoria()">
                        </div>
                        <div>
                            <input type="button" value="Esporta categorie in formato Excel" class="btn" onclick="esportaCategorieExcel()">
                        </div>
                    </div>
                </div>
                <table id="tableProdotti">
                    <thead>
                        <tr>
                            <th data-index="PRODUCT_ID">Product ID</th>
                            <th data-index="PRODUCT_NAME">Product Name</th>
                            <th data-index="SUPPLIER">Supplier</th>
                            <th data-index="CATEGORY">Category</th>
                            <th data-index="QUANTITY_PER_UNIT">Quantity Per Unit</th>
                            <th data-index="UNIT_PRICE">Unit Price</th>
                            <th data-index="UNITS_IN_STOCK">Units In Stock</th>
                            <th data-index="UNITS_ON_ORDER">Units On Order</th>
                            <th data-index="REORDER_LEVEL">Reorder Level</th>
                            <th data-index="DISCONTINUED">Discontinued</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="prodottiTableData">
                    </tbody>
                </table>
                <br><br>
                <table id="tableCategorie">
                    <thead>
                        <tr>
                            <th data-index="CATEGORY_ID">Category ID</th>
                            <th data-index="CATEGORY_NAME">Category Name</th>
                            <th data-index="DESCRIPTION">Description</th>
                            <th data-index="PICTURE">Picture</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="categorieTableData">
                    </tbody>
                </table>
            </div>
            <div id="sidebar" class="collapsed">
                <h3>Form Prodotti:</h3>
                <form action="" method="POST" id="formProdotti">
                    <label for="PRODUCT_ID">Product ID:</label>
                    <input type="text" id="productID" name="PRODUCT_ID" readonly><br>

                    <label for="PRODUCT_NAME">Product Name:</label>
                    <input type="text" id="productName" name="PRODUCT_NAME"><br>

                    <label for="SUPPLIER">Supplier:</label>
                    <input type="text" id="supplier" name="SUPPLIER"><br>

                    <label for="CATEGORY">Category:</label>
                    <input type="text" id="category" name="CATEGORY"><br>
                    
                    <label for="QUANTITY_PER_UNIT">Quantity Per Unit:</label>
                    <input type="text" id="quantityPerUnit" name="QUANTITY_PER_UNIT"><br>

                    <label for="UNIT_PRICE">Unit Price:</label>
                    <input type="number" id="unitPrice" name="UNIT_PRICE"><br>

                    <label for="UNITS_IN_STOCK">Units In Stock:</label>
                    <input type="number" id="unitsInStock" name="UNITS_IN_STOCK"><br>

                    <label for="UNITS_ON_ORDER">Units On Order:</label>
                    <input type="number" id="unitsOnOrder" name="UNITS_ON_ORDER"><br>

                    <label for="REORDER_LEVEL">Reorder Level:</label>
                    <input type="number" id="reorderLevel" name="REORDER_LEVEL"><br>

                    <label for="DISCONTINUED">Discontinued:</label>
                    <input type="checkbox" id="discontinued" name="DISCONTINUED"><br>

                    <input type="submit" value="Salva" class="btn">
                    <input type="reset" value="Cancella" class="btn">
                </form>
                <br><br>
                <h3>Form Categorie:</h3>
                <form action="" method="POST" id="formCategorie">
                    <label for="CATEGORY_ID">Category ID:</label>
                    <input type="text" id="categoryIDCat" name="CATEGORY_ID" readonly><br>

                    <label for="CATEGORY_NAME">Category Name:</label>
                    <input type="text" id="categoryName" name="CATEGORY_NAME"><br>

                    <label for="DESCRIPTION">Description:</label>
                    <input type="text" id="description" name="DESCRIPTION"><br>

                    <label for="PICTURE">Picture:</label>
                    <input type="text" id="picture" name="PICTURE"><br>

                    <input type="submit" value="Salva" class="btn">
                    <input type="reset" value="Cancella" class="btn">
                </form>
            </div>
        </div>
        <div id="bottom">NorthWind</div>
    </div>

    <script type="text/javascript" src="js/prodotti_categorie.js"></script>
</body>
</html>